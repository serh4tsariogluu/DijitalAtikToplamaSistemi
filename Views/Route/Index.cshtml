@model List<AtikDonusum.Models.Delivery>

@{
    ViewData["Title"] = "Rota Planlama";
}

<div class="container-fluid mt-4">
    <h2><i class="bi bi-map"></i> Rota Planlama</h2>

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
    }

    <div class="card shadow-sm">
        <div class="card-header">
            Bekleyen Teslimat Talepleri
        </div>
        <div class="card-body">
            <form asp-action="Calculate" method="post">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th style="width: 50px;">Seç</th>
                            <th>Kullanıcı</th>
                            <th>Atık Türü</th>
                            <th>Miktar</th>
                            <th>Adres</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model != null && Model.Count > 0)
                        {
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        <input type="checkbox" name="selectedIds" value="@item.Id" style="width: 20px; height: 20px;" />
                                    </td>
                                    <td>@item.Kullanici?.Ad</td>
                                    <td>@item.AtikTuru</td>
                                    <td>@item.MiktarKG kg</td>
                                    <td>@item.LokasyonBilgisi</td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr><td colspan="5">Bekleyen talep yok.</td></tr>
                        }
                    </tbody>
                </table>
                <button type="submit" class="btn btn-success w-100 mt-3">En Uygun Rotayı Oluştur</button>
            </form>
        </div>
    </div>
</div>